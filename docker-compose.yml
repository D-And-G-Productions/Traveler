services:
  api:
    build:
      context: ./backend_api
      target: dev
    volumes:
      - ./backend_api:/workspace
      # - ${HOME}/.config/nvim:/root/.config/nvim
    working_dir: /workspace
    stdin_open: true
    tty: true
    command: bash
    ports:
      - 18080:18080

  frontend:
    build:
      context: ./traveler_web
      target: dev
    volumes:
      - ./traveler_web:/workspace
      - ~/.config/nvim:/root/.config/nvim
      - ~/.local/share/nvim:/root/.local/share/nvim
      - ~/.local/state/nvim:/root/.
    tty: true
    command: zsh
    stdin_open: true
    frontend:
    # ... rest of config ...
    environment:
      - EXPO_PACKAGER_PROXY_URL=http://localhost:19006
      - EXPO_DEVTOOLS_LISTEN_ADDRESS=0.0.0.0
      - REACT_NATIVE_PACKAGER_HOSTNAME=127.0.0.1 
    ports:
      - "19006:19006"
    # Run with --host lan or --web to ensure it binds correctly
    command: npx expo start --web --host 0.0.0.0
